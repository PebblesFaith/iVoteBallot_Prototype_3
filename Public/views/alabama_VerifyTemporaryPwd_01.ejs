<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>iVoteBallot | Verify Temporary Password</title>

	<link rel="stylesheet" type="text/css" href="../styles/alabama_VerifyTemporaryPwd_01.css" />

</head>

<!--
	The Developer, Sarai Hannah Ajai have written her HTML and JavaScript codes languages for
	the purpose of the alabama_VerifyTemporaryPwd_01.ejs web page is designed for users in the 
	State of Alabama to verify their temporary password sent by email verifications. It 
	consists of a form where users can enter their email address and temporary password. The
	alabama_VerifyTemporaryPwd_01.ejs web page includes validation functions for the email
	address and temporary password fields to ensure they are entered correctly. There is also
	a JavaScript function that allows users to toggle the visibility of the password field.
    And, the alabama_VerifyTemporaryPwd_01.ejs web page includes links for password recovery
	and account creation.
-->

	<body>

		<header>
			<%- include('../common/header') %>
		</header>

		<div id="flex_Container">
			<div id="flex_Container_Row">
				<div id="flex_Container_Column">
					<div id="first_Column">

						<div id="popUpVerifyTempPwdLogInMenu" class="verifyTempPwdLogIn_Form_01"></div>

							<form class="form_VerifyTempPwdLogIn_01 animate" name="verifyTempPwdLogInorm" onsubmit="return validateVerifyTempPwdLogInForm()" action="/authLogInAlabama_02" method="POST">							

								<div class="verifyTempPwdLogIn_Container_01">

									<br>

									<p id="titleVerifyTempPwdLogIn_01">Verify Your Temporary Password | Alabama</p>

									<label for="email">Email Address |</label>
									<input id="emailVerifyTempPwdLogIn_01" type="text" name="userEmail" maxlength="250">					
									<span id="userEmailVerifyTempPwdLogIn_01ErrorMessage"></span>									
									<br>
									
									<label for="temporaryPassword">Temporary Password |</label>
									<input id="temporaryPassword_VerifyTempPwdLogIn_01" type="password" name="userTemporaryPassword" maxlength="250">									
									<span id="usertemporaryPassword_VerifyTempPwdLogIn_01ErrorMessage"></span>
									<a id="showVerifyTempPwdHideLogIn_01" href="#" onclick="toggle_InputPasswordCheckBox_VerifyTempPwdLogIn_01()">Show Password </a>
									
									<br>
									
									<hr class="hr_Red_line_01">

									<a class="forgotPassword_SignUp_01" href="http://localhost:8080/alabama_ForgotPassword_01">Forgot Password?</a>

									<hr id="hr_Blue_line_02">
								
									<p id="memberQuestion_01">
										Are you already an iVoteBallot's member?
										<a class="verifyTempPwdLogIn_01" href="http://localhost:8080/alabama_SignUporLogIn_01">Access your account.</a>
									</p>

									<hr id="hr_Blue_line_02">

									<p id="memberQuestion_01">
										New to iVoteBallot platform? 
										<a class="verifyTempPwdLogIn_01" href="http://localhost:8080/alabama_SignUporLogIn_01">Sign Up for an Account.</a>
									</p>								
									
									<br>
								
									<button id="verifyTempPwdlogInSubmitButton" type="submit">Continue</button>
									
								</div>
								<br>

								<div class="verifyTempPwdLogIn_Container_01" style="background-color:#f1f1f1">
									<a id="cancelButton_01" href="http://localhost:8080/signUporLogIn_01">
										<button class="cancelButtonVerifyTempPwdLogIn_01" type="button">Cancel</button>
									</a>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>

		<footer>
			<%- include('../common/footer') %>
		</footer>

		<script>

			function toggle_InputPasswordCheckBox_VerifyTempPwdLogIn_01() {
				const inputPassword_LogIn_01 = document.getElementById('temporaryPassword_VerifyTempPwdLogIn_01');
				const userShowHide_LogIn_01 = document.getElementById('showVerifyTempPwdHideLogIn_01');

					if (userShowHide_LogIn_01.innerText === 'Show Password') {
						inputPassword_LogIn_01.setAttribute('type', 'text');
						userShowHide_LogIn_01.innerText = ('Hide Password');
					} else {
						inputPassword_LogIn_01.setAttribute('type', 'password');
						userShowHide_LogIn_01.innerText = 'Show Password';
					}
			}	

			const validateVerifyTempPwdLogInForm = (e) => { 

				const userEmail = document.getElementById('emailVerifyTempPwdLogIn_01').value.trim();				

				const regExEmail = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;	
				
				if (userEmail === '' || userEmail == null || userEmail.length <= 6 || !userEmail.match(regExEmail)) {
					document.getElementById('userEmailVerifyTempPwdLogIn_01ErrorMessage').textContent = 'Your email address is a required input field and you must enter the correct email address format into the require input field.';

					setTimeout(function() {
						document.getElementById('userEmailVerifyTempPwdLogIn_01ErrorMessage').textContent = '';
					},
					9000)

					return false;

				}

				const userTemporaryPassword = document.getElementById('temporaryPassword_VerifyTempPwdLogIn_01').value.trim();
			
				const regExPassword = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{8,32}$/;
				
					if (userTemporaryPassword === '' || userTemporaryPassword == null || userTemporaryPassword.length <= 7 || !userTemporaryPassword.match(regExPassword)) {
					document.getElementById('usertemporaryPassword_VerifyTempPwdLogIn_01ErrorMessage').textContent = 'Your temporary password is a required input field.';
				
					setTimeout(function() {
						document.getElementById('usertemporaryPassword_VerifyTempPwdLogIn_01ErrorMessage').textContent = '';
					},
					9000)
				
				return false;
				
				}     

				e.preventDefault();  
							
				form.addEventListener('submit', validateVerifyTempPwdLogInForm);

				return true;   
				
			}

		</script>
		
	</body>
</html>